<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscripción GASTROFUSION 360</title>
        <link rel="stylesheet" href="styles.css"> 

        <meta property="og:title" content="Inscripción GASTROFUSION 360">
    <meta property="og:description" content="Completa el registro de interés para el evento Gastrofusion 360.">
    <meta property="og:image" content="https://jmejia91.github.io/formulario-gastrofusion/logo.jpg">
    <meta property="og:image:width" content="600">
    <meta property="og:image:height" content="600">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://jmejia91.github.io/formulario-gastrofusion/">
</head>
<body>

    <div class="container">
                <img src="logo.jpg" alt="Logo Gastrofusion 360" class="logo">
        
        <h2>Registro de Interés - GASTROFUSION 360</h2>
        <p>Por favor, completa la siguiente información para iniciar tu proceso de participación.</p>

        <form id="submissionForm"> 

            <label for="nombre">Nombre completo (*)</label>
            <input type="text" id="nombre" name="nombre" required>

                        <label for="email">Correo electrónico (*)</label>
            <input type="email" id="email" name="email" required>

                        <label for="ciudad">Ciudad (*)</label>
            <input type="text" id="ciudad" name="ciudad" required>

                        <label for="celular">Número de Celular (*)</label>
            <input type="tel" id="celular" name="celular" required>

            <div class="checkbox-group">
                <input type="checkbox" id="whatsapp_same" checked>
                <label for="whatsapp_same">Mi número de WhatsApp es el mismo que el celular.</label>
            </div>
            
            <div id="whatsapp_field" style="display: none;">
                <label for="whatsapp">Número de WhatsApp diferente</label>
                <input type="tel" id="whatsapp_input" name="whatsapp"> 
            </div>
            
            <input type="hidden" id="whatsapp_hidden" name="whatsapp">


                        <label for="sector">Marca tu sector perteneciente (*)</label>
            <select id="sector" name="sector" required>
                <option value="" disabled selected>Selecciona una opción</option>
                <option value="Restaurante">Restaurante</option>
                <option value="Zona Dulce">Zona Dulce</option>
                <option value="Zona Spirits">Zona Spirits</option>
                <option value="Gran Salón">Gran Salón</option>
                <option value="Zona de Experiencias">Zona de Experiencias</option>
            </select>

                        <label for="marca">Nombre de tu marca (*)</label>
            <input type="text" id="marca" name="marca" required>

                        <label for="representante">Nombre de representante legal / Persona encargada (*)</label>
            <input type="text" id="representante" name="representante" required>

                        <label for="anos">Años en el mercado (*)</label>
            <input type="number" id="anos" name="anos" min="0" required>

                        <label>¿Has participado con nosotros? (*)</label>
            <div class="radio-group">
                <input type="radio" id="participado_si" name="participado_radio" value="Sí" required>
                <label for="participado_si">Sí</label>
                <input type="radio" id="participado_no" name="participado_radio" value="No">
                <label for="participado_no">No</label>
            </div>

            <div id="participado_year_field" style="display: none;">
                <label for="participado_year">¿En qué año? (Ej: 2023)</label>
                <input type="number" id="participado_year" min="1900" max="2050">
            </div>

            <input type="hidden" id="participado" name="participado">


                        <label for="ferias">¿Has participado en ferias? Nombra cuáles</label>
            <textarea id="ferias" name="ferias" rows="3"></textarea>

                        <label for="decisor">¿Eres tomador de decisión para la participación en GASTROFUSION 360? (*)</label>
            <select id="decisor" name="decisor" required>
                <option value="" disabled selected>Selecciona una opción</option>
                <option value="Sí, soy el tomador de decisión">Sí</option>
                <option value="No, pero informaré al tomador de decisión">No</option>
            </select>

                        <label for="redes">Instagram o página web de tu marca</label>
            <input type="text" id="redes" name="redes">

            <div class="politica-container">
                <button type="button" id="politicaButton">Ver Política de Tratamiento de Datos Personales</button>
                <div id="politicaTexto" class="politica-texto" style="display: none;">
        
                    <p class="politica-titulo">**Política de Tratamiento de Datos Personales GASTROFUSION**</p>
                    <p class="politica-contenido">De acuerdo a la presente autorización, entiendo y acepto el tratamiento de mis datos personales de acuerdo a la presente autorización, en cumplimiento de la Ley Estatutaria 1581 de 2012 de Protección de Datos, y teniendo el conocimiento de la facultad con la que cuento como titular de la información de no suministrar mi información de naturaleza sensible, autorizo de forma libre, previa, expresa e informada a GASTROFUSION, identificada con el NIT 901.635.372-9, con domicilio en la Avenida Bucaros # 60 - 09 local 203, Bucaramanga, Santander, Colombia. Movil 3108824810, en calidad de RESPONSABLE DEL TRATAMIENTO DE DATOS PERSONALES, para que recolecte, capture,  almacene, organice, use, procese, suprima, disocie, transmita y/o transfiera a terceros dentro y fuera del territorio nacional y en general realice tratamiento sobre mis datos personales, para llevar a cabo las finalidades que se mencionan a continuación:  1. Crear, registrar, administrar y acreditar su calidad de participante en nuestros eventos; 2. Procesar tu historial de participaciones con el fin de ofrecerte una experiencia personalizada; 3. Comunicarse y enviar información comercial, de mercadeo y promocional relacionada con los servicios y productos ofrecidos por la entidad, enviar invitaciones, formatos de preinscripción o cualquier comunicación relacionada con eventos, ciclos de conferencias, cursos, seminarios, talleres, diplomados, simposios, foros y programas corporativos que desarrolle GASTROFUSION a través de cualquier medio físico o electrónico, conocido o por conocerse, dentro de los cuales se incluyen los siguientes canales y de conformidad con las políticas establecidas por GASTROFUSION: i) línea de teléfono fijo; ii) línea de teléfono móvil; iii) correo electrónico; iv) mensajes de texto (SMS); v) aplicaciones de mensajería instantánea como WhatsApp o cualquier otra aplicación; vi) correo postal; vii) visita domiciliaria y/o al lugar de trabajo, de acuerdo a lo preceptuado en la Ley; viii) cualquier otro medio de comunicación digital asociado a su número de teléfono y correo;  4. Contactarse con el titular de la información para brindar información financiera y/o crediticia y/o gestionar el cobro de obligaciones adquiridas con GASTROFUSION y todas las entidades que adelantan gestiones de cobranza de forma directa, por medio de terceros o por cesión de la obligación, a través de los siguientes canales y de conformidad con las políticas establecidas por GASTROFUSION : i) línea de teléfono fijo; ii) línea de teléfono móvil; iii) correo electrónico; iv) mensajes de texto (SMS); v) aplicaciones de mensajería instantánea como WhatsApp o cualquier otra aplicación; vi) correo postal; vii) visita domiciliaria y/o al lugar de trabajo, de acuerdo a lo preceptuado en la Ley; viii) cualquier otro medio de comunicación digital asociado a su número de teléfono; 5. Compartir sus datos personales a terceras entidades aliadas que hacen parte del evento al cual se registró, para que estas ofrezcan sus productos y servicios; 6. Distribuir y responder encuestas para que califique los eventos a los cuales ha asistido. 7. Conservarla para fines estadísticos e históricos y/o para cumplir con obligaciones legales en lo que a conservación de información y documentos se refiere; 8. Enviar o aportar información a las autoridades competentes, cuando así lo soliciten, o en el curso de controversias contractuales; 9. Dar cumplimiento a las obligaciones legales que se encuentren en cabeza de GASTROFUSION; 10. Atender peticiones, quejas y/o reclamos. 11. Tomar fotografías y videos en los eventos y programas, que podrán ser utilizados en ediciones impresas, electrónicas, digitales, ópticas, magnéticas, mensajes de datos o similares, vallas, pendones, redes y cualquier otro medio disponible presente o futuro, para fines publicitarios institucionales en medios de comunicación audiovisuales, gráficos, internet, vía pública, plataformas digitales, incluyendo página web y redes sociales de la entidad. Para efectos de esta autorización manifiesto que cedo mis derechos de imagen, derechos derivados de las fotografías, grabaciones de voz y fijaciones audiovisuales, electrónicos, magnéticos, entre otros, que serán tomadas durante los eventos y en general en cualquier medio, por el término máximo de duración de la protección de la normatividad vigente y, que las mismas podrán ser transferidas a entidades distintas a GASTROFUSION para los mismos fines anteriormente mencionados. Igualmente, esta autorización comprende la cesión de los derechos patrimoniales de autor (uso, comunicación pública, reproducción, distribución publica, traducción, adaptación, arreglo u otra transformación de cualquier tipo e importación de ejemplares reproducidos) y derechos conexos que se deriven.

<p class="politica-contenido">Como titular de datos personales, tengo derecho a: (i) Acceder a sus datos sin restricción y de manera gratuita. (ii) Conocer, actualizar y rectificar su información frente a datos parciales, inexactos, incompletos, fraccionados, que induzcan a error, o a aquellos cuyo tratamiento esté prohibido o no haya sido autorizado. (iii) Solicitar prueba de la autorización otorgada. (iv) Presentar ante la Superintendencia de Industria y Comercio (SIC) quejas por infracciones a lo dispuesto en la normatividad vigente en protección de datos. (v) Revocar la autorización y/o solicitar la supresión del dato, siempre que no exista un deber legal o contractual que impida eliminarlos. (vi) Abstenerse de responder las preguntas sobre datos sensibles. Tendrá carácter facultativo las respuestas que versen sobre datos sensibles o sobre datos de las niñas y niños y adolescentes. Usted podrá ejercer en cualquier momento sus derechos enviando una comunicación física a la Avenida Bucaros # 60 - 09 local 203, Bucaramanga, Santander, Colombia, dirigida a GASTROFUSION o a través de comunicación electrónica a la siguiente cuenta de correo electrónico: sgastrofusion@gmail.com. Recuerde que usted deberá indicar en el asunto “habeas data” indicando su nombre completo y documento de identificación.</p>

<p class="politica-contenido">De igual manera declaro que: a) Conozco que no tengo derecho de recibir compensaciones ni reconocimientos económicos, comerciales o lucrativos por el uso de la imagen, video, y/o voz que se realice, estableciendo que únicamente hará uso de dichos datos única y exclusivamente para los fines antes señalados; b) Que la información registrada en este formato, es correcta, fidedigna, veraz y actualizada, y que: (i) Autorizo que la información que entrego podrá ser transmitida o transferida a empresas aliadas o compartida con terceros proveedores contratados para realizar su tratamiento bajo las mismas finalidades ya mencionadas; (ii) En caso de entregar datos personales de terceros, cuento con la autorización de sus titulares para suministrarla y para que sea tratada por GASTROFUSION  de acuerdo con las finalidades acá mencionadas.</p>

<p class="politica-contenido">Esta autorización permanecerá vigente, hasta tanto se mantengan las finalidades para las cuales fueron recopilados mis datos personales y/o hasta que sea revocada, siempre y cuando no exista ningún tipo de relación con GASTROFUSION o no se encuentre vigente algún producto o servicio derivado de esta autorización.</p>
                    </div>
            </div>

            <p class="aceptacion-declaracion">
                Al hacer clic en **"Enviar Registro"**, usted confirma que ha leído y acepta la Política de Tratamiento de Datos Personales de GASTROFUSION.
            </p>

            <button type="submit" id="submitButton">Enviar Registro</button>

            <div id="loading" style="display: none; color: #007bff;">Enviando datos...</div>
            <div id="successMessage" style="display: none; color: green;">¡Gracias! Tu registro ha sido enviado con éxito.</div>
            <div id="errorMessage" style="display: none; color: red;">Error al enviar. Intenta de nuevo.</div>

        </form>
    </div>

        <script>
        // 1. **REEMPLAZA ESTA URL CON LA QUE COPIASTE DEL PASO 2**
        const APP_WEB_URL = 'https://script.google.com/macros/s/AKfycbwqbVIs7uXppBzUfr1Bkw41DVowPGdb-CBTHB2FJivqkrEXLztUIVOX5XtJBWa1tsruyA/exec'; // ¡ACTUALIZA ESTO!
        
        const form = document.getElementById('submissionForm');
        const submitButton = document.getElementById('submitButton');
        const loading = document.getElementById('loading');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');

        // Lógica de WhatsApp: Copia el celular si el checkbox está marcado
        const celularInput = document.getElementById('celular');
        const whatsappCheckbox = document.getElementById('whatsapp_same');
        const whatsappField = document.getElementById('whatsapp_field');
        const whatsappInput = document.getElementById('whatsapp_input');
        const whatsappHidden = document.getElementById('whatsapp_hidden');
        
        // Lógica de "Participación Anterior"
        const participadoSi = document.getElementById('participado_si');
        const participadoNo = document.getElementById('participado_no');
        const participadoYearField = document.getElementById('participado_year_field');
        const participadoYearInput = document.getElementById('participado_year');
        const participadoHidden = document.getElementById('participado');

        // --- Lógica de la Política de Datos (NUEVO) ---
        const politicaButton = document.getElementById('politicaButton');
        const politicaTexto = document.getElementById('politicaTexto');

        politicaButton.addEventListener('click', function() {
            if (politicaTexto.style.display === 'none') {
                politicaTexto.style.display = 'block';
                politicaButton.textContent = 'Ocultar Política de Tratamiento de Datos Personales';
            } else {
                politicaTexto.style.display = 'none';
                politicaButton.textContent = 'Ver Política de Tratamiento de Datos Personales';
            }
        });


        // Función para manejar la visibilidad y el valor del campo WhatsApp
        function handleWhatsappLogic() {
            if (whatsappCheckbox.checked) {
                whatsappField.style.display = 'none';
                whatsappInput.value = ''; // Limpiar el campo visible
                whatsappHidden.value = celularInput.value; // Copia el celular al campo oculto que se envía
            } else {
                whatsappField.style.display = 'block';
                whatsappHidden.value = whatsappInput.value; // Usa el valor ingresado en el campo visible
            }
        }
        
        // Función para manejar la visibilidad y el valor del campo Participación
        function handleParticipacionLogic() {
            if (participadoSi.checked) {
                participadoYearField.style.display = 'block';
                // Combina "Sí" y el año en el campo oculto
                participadoHidden.value = "Sí - Año: " + participadoYearInput.value;
            } else if (participadoNo.checked) {
                participadoYearField.style.display = 'none';
                participadoHidden.value = "No";
            } else {
                 participadoYearField.style.display = 'none';
                 participadoHidden.value = "";
            }
        }

        // Asignar eventos de escucha
        celularInput.addEventListener('input', handleWhatsappLogic);
        whatsappCheckbox.addEventListener('change', handleWhatsappLogic);
        whatsappInput.addEventListener('input', handleWhatsappLogic);
        
        participadoSi.addEventListener('change', handleParticipacionLogic);
        participadoNo.addEventListener('change', handleParticipacionLogic);
        participadoYearInput.addEventListener('input', handleParticipacionLogic);


        // Inicializar la lógica al cargar la página
        handleWhatsappLogic();
        handleParticipacionLogic();


        // Función principal de envío del formulario
        form.addEventListener('submit', function(e) {
            e.preventDefault(); // Detiene el envío normal del formulario HTML
            
            // Re-evaluar la lógica final antes de crear los datos
            handleWhatsappLogic(); 
            handleParticipacionLogic();
            
            // Mostrar estado de carga
            submitButton.disabled = true;
            loading.style.display = 'block';
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';

            // Crear el objeto FormData con los datos del formulario
            const data = new FormData(form);
            
            // Convertir FormData a un objeto de URLSearchParams (formato esperado por Apps Script)
            const urlEncodedData = new URLSearchParams(data).toString();

            fetch(APP_WEB_URL, {
                method: 'POST',
                mode: 'cors', // Necesario para evitar problemas de seguridad
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: urlEncodedData 
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Respuesta de red no fue OK: ' + response.statusText);
                }
                return response.json(); // Intentamos leer el JSON de respuesta del script
            })
            .then(data => {
                loading.style.display = 'none';
                if (data.result === 'success') {
                    successMessage.style.display = 'block';
                    form.reset(); // Limpia el formulario
                    // Re-inicializa la lógica después de limpiar
                    handleWhatsappLogic();
                    handleParticipacionLogic();
                } else {
                    errorMessage.style.display = 'block';
                    console.error('Error del script:', data.message);
                }
            })
            .catch(error => {
                loading.style.display = 'none';
                errorMessage.style.display = 'block';
                console.error('Error de envío:', error);
            })
            .finally(() => {
                submitButton.disabled = false; // Habilitar el botón de nuevo
            });
        });
    </script>
</body>
</html>